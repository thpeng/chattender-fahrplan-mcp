spring:
  application:
    name: chattender-fahrplan-mcp
  security:
    oauth2:
      client:
        registration:
          journey:
            provider: sbb-azure
            authorization-grant-type: client_credentials
            client-id: ${JOURNEY_SERVICE_CLIENT_ID}
            client-secret: ${JOURNEY_SERVICE_CLIENT_SECRET}
            scope:
              - api://c11fa6b1-edab-4554-a43d-8ab71b016325/.default

        provider:
          sbb-azure:
            token-uri: https://login.microsoftonline.com/2cda5d11-f0ac-46b3-967d-af1b2e1bd01a/oauth2/v2.0/token
  ai:
    mcp:
      server:
        protocol: streamable
        name: chattender-fahrplan-mcp
        version: 1.0.0
        type: SYNC
        instructions: |
          You are using the "chattender-fahrplan-mcp" timetable tools for planning journeys in switzerland

          RULES FOR THE ASSISTANT:
          - Use timetable tools (nextJourney, planJourney, listJourneys, listAndPlanJourneys, raw) to obtain current data.
          - For concrete timetable details (service names, times, platforms), rely ONLY on the latest tool result, not on older tool calls in this conversation.
          - Do NOT invent or reuse service names, times or platforms from memory. Always copy them from the most recent tool output.
          - Always answer in the same language as the user's last message.
          - Make it clear and include it in your answer that timetable information may be incomplete or incorrect due to AI-based interpretation and should be verified on https://www.sbb.ch/. 

        resource-change-notification: true
        tool-change-notification: true
        prompt-change-notification: true
        sse-endpoint: /mcp
        streamable-http:
          mcp-endpoint: /mcp

management:
  endpoints:
    web:
      exposure:
        include:
          - health
          - readiness
          - liveness
